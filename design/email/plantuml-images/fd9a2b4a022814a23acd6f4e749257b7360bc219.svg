<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="573px" preserveAspectRatio="none" style="width:1037px;height:573px;" version="1.1" viewBox="0 0 1037 573" width="1037px" zoomAndPan="magnify"><defs><filter height="300%" id="f6nk2ueetkejp" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--cluster wait--><polygon fill="#FFFFFF" filter="url(#f6nk2ueetkejp)" points="222,335,261,335,268,357.2969,1015,357.2969,1015,561,222,561,222,335" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="222" x2="268" y1="357.2969" y2="357.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="33" x="226" y="349.9951">wait</text><!--class wait.--><rect fill="#FEFECE" filter="url(#f6nk2ueetkejp)" height="159.2109" id="wait." style="stroke: #A80036; stroke-width: 1.5;" width="725" x="265.5" y="378"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="630" y="394.1387"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="266.5" x2="989.5" y1="401.9688" y2="401.9688"/><ellipse cx="276.5" cy="430.6758" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="434" x="285.5" y="432.9839">wait_for_message(Subscription * subscription, milliseconds timeout): string</text><ellipse cx="276.5" cy="443.4805" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="610" x="285.5" y="445.7886">wait_for_message_with_info(Subscription * subscription, milliseconds timeout): pair&lt;string, MessageInfo&gt;</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="266.5" x2="592.5" y1="416.3711" y2="416.3711"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="71" x="592.5" y="419.6792">Subscription</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="663.5" x2="989.5" y1="416.3711" y2="416.3711"/><ellipse cx="276.5" cy="473.0898" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="532" x="285.5" y="475.3979">wait_for_response(SequenceNumber seq, ServiceClient * client, milliseconds timeout): string</text><ellipse cx="276.5" cy="485.8945" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="699" x="285.5" y="488.2026">wait_for_response_with_info(SequenceNumber seq, ServiceClient * client, milliseconds timeout): pair&lt;string, ServiceInfo&gt;</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="266.5" x2="590" y1="458.7852" y2="458.7852"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="76" x="590" y="462.0933">Service client</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="666" x2="989.5" y1="458.7852" y2="458.7852"/><ellipse cx="276.5" cy="515.5039" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="456" x="285.5" y="517.812">wait_for_request(ServiceServer * server, milliseconds timeout): ServiceRequest</text><ellipse cx="276.5" cy="528.3086" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="623" x="285.5" y="530.6167">wait_for_request_with_info(ServiceServer * server, milliseconds timeout): pair&lt;ServiceRequest, ServiceInfo&gt;</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="266.5" x2="586.5" y1="501.1992" y2="501.1992"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="83" x="586.5" y="504.5073">Service server</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="669.5" x2="989.5" y1="501.1992" y2="501.1992"/><!--class Subscription--><rect fill="#FEFECE" filter="url(#f6nk2ueetkejp)" height="23.9688" id="Subscription" style="stroke: #A80036; stroke-width: 1.5;" width="84" x="6" y="37.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="78" x="9" y="53.6387">Subscription</text><!--class ServiceClient--><rect fill="#FEFECE" filter="url(#f6nk2ueetkejp)" height="23.9688" id="ServiceClient" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="125" y="37.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="80" x="128" y="53.6387">ServiceClient</text><!--class ServiceServer--><rect fill="#FEFECE" filter="url(#f6nk2ueetkejp)" height="23.9688" id="ServiceServer" style="stroke: #A80036; stroke-width: 1.5;" width="91" x="246.5" y="37.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="85" x="249.5" y="53.6387">ServiceServer</text><!--class GuardCondition--><rect fill="#FEFECE" filter="url(#f6nk2ueetkejp)" height="83.1875" id="GuardCondition" style="stroke: #A80036; stroke-width: 1.5;" width="228" x="373" y="8"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="97" x="438.5" y="24.1387">GuardCondition</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="374" x2="600" y1="31.9688" y2="31.9688"/><ellipse cx="384" cy="43.8711" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="46" x="393" y="46.1792">trigger()</text><ellipse cx="384" cy="56.6758" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="92" x="393" y="58.9839">triggered(): bool</text><ellipse cx="384" cy="69.4805" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="202" x="393" y="71.7886">exchange_in_use(bool in_use): bool</text><ellipse cx="384" cy="82.2852" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="38" x="393" y="84.5933">reset()</text><!--class WaitSet--><rect fill="#FEFECE" filter="url(#f6nk2ueetkejp)" height="160.0156" id="WaitSet" style="stroke: #A80036; stroke-width: 1.5;" width="314" x="73" y="151"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="48" x="206" y="167.1387">WaitSet</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="74" x2="386" y1="174.9688" y2="174.9688"/><ellipse cx="84" cy="186.8711" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="186" x="93" y="189.1792">add_subscription(Subscription *)</text><ellipse cx="84" cy="199.6758" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="149" x="93" y="201.9839">add_client(ServiceClient *)</text><ellipse cx="84" cy="212.4805" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="162" x="93" y="214.7886">add_server(ServiceServer *)</text><ellipse cx="84" cy="225.2852" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="223" x="93" y="227.5933">add_guard_condition(GuardCondition *)</text><ellipse cx="84" cy="238.0898" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="251" x="93" y="240.3979">get_subscriptions(): vector&lt;Subscription *&gt;</text><ellipse cx="84" cy="250.8945" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="214" x="93" y="253.2026">get_clients(): vector&lt;ServiceClient *&gt;</text><ellipse cx="84" cy="263.6992" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="227" x="93" y="266.0073">get_servers(): vector&lt;ServiceServer *&gt;</text><ellipse cx="84" cy="276.5039" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="288" x="93" y="278.812">get_guard_conditions(): vector&lt;GuardCondition *&gt;</text><ellipse cx="84" cy="289.3086" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="181" x="93" y="291.6167">wait(milliseconds timeout): bool</text><ellipse cx="84" cy="302.1133" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="36" x="93" y="304.4214">clear()</text><!--link Subscription to WaitSet--><path d="M68.68,70.9 C88.59,90.53 120,121.51 149.83,150.93 " fill="none" id="Subscription-WaitSet" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="59.38,61.73,60.8436,68.791,67.9244,70.1557,66.4608,63.0947,59.38,61.73" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="23" x="36.3328" y="81.5979">0..*</text><!--link ServiceClient to WaitSet--><path d="M176.2,74.24 C183,93.94 193.09,123.13 202.69,150.93 " fill="none" id="ServiceClient-WaitSet" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="171.88,61.73,170.0577,68.7071,175.7972,73.0727,177.6195,66.0956,171.88,61.73" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="23" x="145.8796" y="81.5979">0..*</text><!--link ServiceServer to WaitSet--><path d="M283.8,74.24 C277,93.94 266.91,123.13 257.31,150.93 " fill="none" id="ServiceServer-WaitSet" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="288.12,61.73,282.3805,66.0956,284.2028,73.0727,289.9423,68.7071,288.12,61.73" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="23" x="259.0641" y="81.5979">0..*</text><!--link GuardCondition to WaitSet--><path d="M418.31,98.48 C395.24,114.59 368.86,133.02 343.29,150.87 " fill="none" id="GuardCondition-WaitSet" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="429,91.01,421.7906,91.1661,419.1618,97.8809,426.3712,97.7249,429,91.01" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="23" x="394.4891" y="111.1896">0..*</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="24" x="328.6277" y="139.8639">0..1</text><!--link WaitSet to wait--><path d="M230,316.4 C230,320.3156 230,324.2795 230,328.2709 C230,330.2665 230,332.2691 230,334.2759 " fill="none" id="WaitSet-wait" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="230,311.15,226,320.15,230,316.15,234,320.15,230,311.15" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="133.9031" y="331.0284">internally uses</text><!--
@startuml

hide empty attributes
hide empty methods
hide circle

class Subscription
class ServiceClient
class ServiceServer

class GuardCondition {
   +trigger()
   +triggered(): bool
   +exchange_in_use(bool in_use): bool
   +reset()
}

class WaitSet {
   +add_subscription(Subscription *)
   +add_client(ServiceClient *)
   +add_server(ServiceServer *)
   +add_guard_condition(GuardCondition *)
   +get_subscriptions(): vector<Subscription *>
   +get_clients(): vector<ServiceClient *>
   +get_servers(): vector<ServiceServer *>
   +get_guard_conditions(): vector<GuardCondition *>
   +wait(milliseconds timeout): bool
   +clear()
}
Subscription "0..*" o- - WaitSet
ServiceClient "0..*" o- - WaitSet
ServiceServer "0..*" o- - WaitSet
GuardCondition "0..*" o- - "0..1" WaitSet

class wait. {
   .. Subscription ..
   +wait_for_message(Subscription * subscription, milliseconds timeout): string
   +wait_for_message_with_info(Subscription * subscription, milliseconds timeout): pair<string, MessageInfo>
   .. Service client ..
   +wait_for_response(SequenceNumber seq, ServiceClient * client, milliseconds timeout): string
   +wait_for_response_with_info(SequenceNumber seq, ServiceClient * client, milliseconds timeout): pair<string, ServiceInfo>
   .. Service server ..
   +wait_for_request(ServiceServer * server, milliseconds timeout): ServiceRequest
   +wait_for_request_with_info(ServiceServer * server, milliseconds timeout): pair<ServiceRequest, ServiceInfo>
}
WaitSet "internally uses" <- - wait

@enduml

PlantUML version 1.2018.13(Mon Nov 26 17:11:51 UTC 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.11+9
Operating System: Linux
OS Version: 5.8.0-1039-azure
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>