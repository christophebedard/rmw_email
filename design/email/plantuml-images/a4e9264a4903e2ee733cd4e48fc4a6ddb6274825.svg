<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="783px" preserveAspectRatio="none" style="width:3185px;height:783px;" version="1.1" viewBox="0 0 3185 783" width="3185px" zoomAndPan="magnify"><defs><filter height="300%" id="f1593iq5fuy4r5" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--class CurlContext--><rect fill="#FEFECE" filter="url(#f1593iq5fuy4r5)" height="83.1875" id="CurlContext" style="stroke: #A80036; stroke-width: 1.5;" width="143" x="81.71" y="8"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="72" x="117.21" y="24.1387">CurlContext</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="82.71" x2="223.71" y1="31.9688" y2="31.9688"/><ellipse cx="92.71" cy="43.8711" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="25" x="101.71" y="46.1792">init()</text><ellipse cx="92.71" cy="56.6758" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="25" x="101.71" y="58.9839">fini()</text><ellipse cx="92.71" cy="69.4805" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="117" x="101.71" y="71.7886">get_handle(): CURL *</text><ellipse cx="92.71" cy="82.2852" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="101.71" y="84.5933">execute()</text><!--class CurlExecutor--><rect fill="#FEFECE" filter="url(#f1593iq5fuy4r5)" height="57.5781" id="CurlExecutor" style="stroke: #A80036; stroke-width: 1.5;" width="98" x="104.21" y="161"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="79" x="113.71" y="177.1387">CurlExecutor</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="105.21" x2="201.21" y1="184.9688" y2="184.9688"/><ellipse cx="115.21" cy="196.8711" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="25" x="124.21" y="199.1792">init()</text><polygon fill="#FFFF44" points="115.21,204.6758,119.21,208.6758,115.21,212.6758,111.21,208.6758" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="72" x="124.21" y="211.9839">init_options()</text><!--class EmailSender--><rect fill="#FEFECE" filter="url(#f1593iq5fuy4r5)" height="57.5781" id="EmailSender" style="stroke: #A80036; stroke-width: 1.5;" width="384" x="627.21" y="318.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="78" x="780.21" y="334.6387">EmailSender</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="628.21" x2="1010.21" y1="342.4688" y2="342.4688"/><ellipse cx="638.21" cy="354.3711" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="291" x="647.21" y="356.6792">send(EmailContent, optional&lt;EmailHeaders&gt;): bool</text><ellipse cx="638.21" cy="367.1758" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="358" x="647.21" y="369.4839">reply(EmailContent, EmailData, optional&lt;EmailHeaders&gt;): bool</text><!--class CurlEmailSender--><rect fill="#FEFECE" filter="url(#f1593iq5fuy4r5)" height="70.3828" id="CurlEmailSender" style="stroke: #A80036; stroke-width: 1.5;" width="384" x="58.21" y="483"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="102" x="199.21" y="499.1387">CurlEmailSender</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="59.21" x2="441.21" y1="506.9688" y2="506.9688"/><ellipse cx="69.21" cy="518.8711" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="291" x="78.21" y="521.1792">send(EmailContent, optional&lt;EmailHeaders&gt;): bool</text><ellipse cx="69.21" cy="531.6758" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="358" x="78.21" y="533.9839">reply(EmailContent, EmailData, optional&lt;EmailHeaders&gt;): bool</text><polygon fill="#FFFF44" points="69.21,539.4805,73.21,543.4805,69.21,547.4805,65.21,543.4805" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="72" x="78.21" y="546.7886">init_options()</text><!--class EmailReceiver--><rect fill="#FEFECE" filter="url(#f1593iq5fuy4r5)" height="70.3828" id="EmailReceiver" style="stroke: #A80036; stroke-width: 1.5;" width="374" x="1046.21" y="155"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="86" x="1190.21" y="171.1387">EmailReceiver</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1047.21" x2="1419.21" y1="178.9688" y2="178.9688"/><ellipse cx="1057.21" cy="190.8711" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="348" x="1066.21" y="193.1792">get_email(nanoseconds polling_period): optional&lt;EmailData&gt;</text><ellipse cx="1057.21" cy="203.6758" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="63" x="1066.21" y="205.9839">shutdown()</text><polygon fill="#FFFF44" points="1057.21,211.4805,1061.21,215.4805,1057.21,219.4805,1053.21,215.4805" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="72" x="1066.21" y="218.7886">init_options()</text><!--class CurlEmailReceiver--><rect fill="#FEFECE" filter="url(#f1593iq5fuy4r5)" height="95.9922" id="CurlEmailReceiver" style="stroke: #A80036; stroke-width: 1.5;" width="549" x="42.71" y="299.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="110" x="262.21" y="315.6387">CurlEmailReceiver</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="43.71" x2="590.71" y1="323.4688" y2="323.4688"/><ellipse cx="53.71" cy="335.3711" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="408" x="62.71" y="337.6792">get_email(nanoseconds polling_period): optional&lt;EmailData&gt; {abstract</text><polygon fill="#FFFF44" points="53.71,343.1758,57.71,347.1758,53.71,351.1758,49.71,347.1758" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="72" x="62.71" y="350.4839">init_options()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="50.71" y="357.9805"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="158" x="62.71" y="363.2886">get_nextuid(): optional&lt;int&gt;</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="50.71" y="370.7852"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="261" x="62.71" y="376.0933">get_email_from_uid(int): optional&lt;EmailData&gt;</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="50.71" y="383.5898"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="523" x="62.71" y="388.8979">execute(optional&lt;string&gt;, url_options, optional&lt;string&gt; custom_request): optional&lt;string&gt;</text><!--class IntraEmailReceiver--><rect fill="#FEFECE" filter="url(#f1593iq5fuy4r5)" height="78.3828" id="IntraEmailReceiver" style="stroke: #A80036; stroke-width: 1.5;" width="374" x="1046.21" y="308.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="115" x="1175.71" y="324.6387">IntraEmailReceiver</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1047.21" x2="1419.21" y1="332.4688" y2="332.4688"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1054.21" y="341.3711"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="156" x="1066.21" y="346.6792">emails: queue&lt;EmailData&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1047.21" x2="1419.21" y1="353.2734" y2="353.2734"/><ellipse cx="1057.21" cy="365.1758" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="348" x="1066.21" y="367.4839">get_email(nanoseconds polling_period): optional&lt;EmailData&gt;</text><ellipse cx="1057.21" cy="377.9805" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="135" x="1066.21" y="380.2886">receive(EmailData data)</text><!--class IntraEmailSender--><rect fill="#FEFECE" filter="url(#f1593iq5fuy4r5)" height="57.5781" id="IntraEmailSender" style="stroke: #A80036; stroke-width: 1.5;" width="384" x="793.21" y="489"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="107" x="931.71" y="505.1387">IntraEmailSender</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="794.21" x2="1176.21" y1="512.9688" y2="512.9688"/><ellipse cx="804.21" cy="524.8711" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="291" x="813.21" y="527.1792">send(EmailContent, optional&lt;EmailHeaders&gt;): bool</text><ellipse cx="804.21" cy="537.6758" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="358" x="813.21" y="539.9839">reply(EmailContent, EmailData, optional&lt;EmailHeaders&gt;): bool</text><!--class PollingManager--><rect fill="#FEFECE" filter="url(#f1593iq5fuy4r5)" height="116.7969" id="PollingManager" style="stroke: #A80036; stroke-width: 1.5;" width="292" x="1597.21" y="289"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="96" x="1695.21" y="305.1387">PollingManager</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1598.21" x2="1888.21" y1="312.9688" y2="312.9688"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1605.21" y="321.8711"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="37" x="1617.21" y="327.1792">thread</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1598.21" x2="1888.21" y1="333.7734" y2="333.7734"/><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1605.21" y="342.6758"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="266" x="1617.21" y="347.9839">handlers: vector&lt;function&lt;void (EmailData)&gt;&gt;</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1605.21" y="355.4805"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="71" x="1617.21" y="360.7886">poll_thread()</text><ellipse cx="1608.21" cy="371.2852" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="35" x="1617.21" y="373.5933">start()</text><ellipse cx="1608.21" cy="384.0898" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="63" x="1617.21" y="386.3979">shutdown()</text><ellipse cx="1608.21" cy="396.8945" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="257" x="1617.21" y="399.2026">register_handler(function&lt;void (EmailData)&gt;)</text><!--class EmailHandler--><rect fill="#FEFECE" filter="url(#f1593iq5fuy4r5)" height="44.7734" id="EmailHandler" style="stroke: #A80036; stroke-width: 1.5;" width="129" x="1985.71" y="325"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="82" x="2009.21" y="341.1387">EmailHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1986.71" x2="2113.71" y1="348.9688" y2="348.9688"/><ellipse cx="1996.71" cy="360.8711" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="103" x="2005.71" y="363.1792">handle(EmailData)</text><!--class SubscriptionHandler--><rect fill="#FEFECE" filter="url(#f1593iq5fuy4r5)" height="78.3828" id="SubscriptionHandler" style="stroke: #A80036; stroke-width: 1.5;" width="569" x="2525.71" y="479"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="127" x="2746.71" y="495.1387">SubscriptionHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2526.71" x2="3093.71" y1="502.9688" y2="502.9688"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="2533.71" y="511.8711"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="375" x="2545.71" y="517.1792">subscriptions: map&lt;string, queue&lt;pair&lt;string, MessageInfo&gt;&gt;&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2526.71" x2="3093.71" y1="523.7734" y2="523.7734"/><ellipse cx="2536.71" cy="535.6758" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="543" x="2545.71" y="537.9839">register_subscription(string topic_name, queue&lt;pair&lt;string, MessageInfo&gt;&gt; message_queue)</text><ellipse cx="2536.71" cy="548.4805" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="103" x="2545.71" y="550.7886">handle(EmailData)</text><!--class ServiceHandler--><rect fill="#FEFECE" filter="url(#f1593iq5fuy4r5)" height="103.9922" id="ServiceHandler" style="stroke: #A80036; stroke-width: 1.5;" width="603" x="1425.71" y="466"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="94" x="1680.21" y="482.1387">ServiceHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1426.71" x2="2027.71" y1="489.9688" y2="489.9688"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1433.71" y="498.8711"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="546" x="1445.71" y="504.1792">clients: map&lt;GidValue, shared_ptr&lt;map&lt;SequenceNumber, pair&lt;EmailData, ServiceInfo&gt;&gt;&gt;&gt;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1433.71" y="511.6758"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="437" x="1445.71" y="516.9839">servers: map&lt;string, shared_ptr&lt;queue&lt;pair&lt;EmailData, ServiceInfo&gt;&gt;&gt;&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1426.71" x2="2027.71" y1="523.5781" y2="523.5781"/><ellipse cx="1436.71" cy="535.4805" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="572" x="1445.71" y="537.7886">register_service_client(Gid, map&lt;SequenceNumber, pair&lt;EmailData, ServiceInfo&gt;&gt; response_map)</text><ellipse cx="1436.71" cy="548.2852" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="577" x="1445.71" y="550.5933">register_service_server(string service_name, queue&lt;pair&lt;EmailData, ServiceInfo&gt;&gt; request_queue)</text><ellipse cx="1436.71" cy="561.0898" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="103" x="1445.71" y="563.3979">handle(EmailData)</text><!--class GidObject--><rect fill="#FEFECE" filter="url(#f1593iq5fuy4r5)" height="65.5781" id="GidObject" style="stroke: #A80036; stroke-width: 1.5;" width="102" x="2005.21" y="157"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="60" x="2026.21" y="173.1387">GidObject</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2006.21" x2="2106.21" y1="180.9688" y2="180.9688"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="2013.21" y="189.8711"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="44" x="2025.21" y="195.1792">gid: Gid</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2006.21" x2="2106.21" y1="201.7734" y2="201.7734"/><ellipse cx="2016.21" cy="213.6758" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="76" x="2025.21" y="215.9839">get_gid(): Gid</text><!--class NamedObject--><rect fill="#FEFECE" filter="url(#f1593iq5fuy4r5)" height="78.3828" id="NamedObject" style="stroke: #A80036; stroke-width: 1.5;" width="171" x="1684.71" y="151"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="84" x="1728.21" y="167.1387">NamedObject</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1685.71" x2="1854.71" y1="174.9688" y2="174.9688"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1692.71" y="183.8711"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="113" x="1704.71" y="189.1792">object_name: string</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1685.71" x2="1854.71" y1="195.7734" y2="195.7734"/><polygon fill="#FFFF44" points="1695.71,202.6758,1699.71,206.6758,1695.71,210.6758,1691.71,206.6758" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="145" x="1704.71" y="209.9839">get_object_name(): string</text><polygon fill="#FFFF44" points="1695.71,215.4805,1699.71,219.4805,1695.71,223.4805,1691.71,219.4805" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="91" x="1704.71" y="222.7886">validate_name()</text><!--class PubSubObject--><rect fill="#FEFECE" filter="url(#f1593iq5fuy4r5)" height="57.5781" id="PubSubObject" style="stroke: #A80036; stroke-width: 1.5;" width="164" x="2180.21" y="318.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="88" x="2218.21" y="334.6387">PubSubObject</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2181.21" x2="2343.21" y1="342.4688" y2="342.4688"/><ellipse cx="2191.21" cy="354.3711" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="138" x="2200.21" y="356.6792">get_topic_name(): string</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="2188.21" y="364.1758"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="91" x="2200.21" y="369.4839">validate_name()</text><!--class ServiceObject--><rect fill="#FEFECE" filter="url(#f1593iq5fuy4r5)" height="57.5781" id="ServiceObject" style="stroke: #A80036; stroke-width: 1.5;" width="178" x="1212.21" y="489"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="85" x="1258.71" y="505.1387">ServiceObject</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1213.21" x2="1389.21" y1="512.9688" y2="512.9688"/><ellipse cx="1223.21" cy="524.8711" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="152" x="1232.21" y="527.1792">get_service_name(): string</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1220.21" y="534.6758"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="91" x="1232.21" y="539.9839">validate_name()</text><!--class Publisher--><rect fill="#FEFECE" filter="url(#f1593iq5fuy4r5)" height="44.7734" id="Publisher" style="stroke: #A80036; stroke-width: 1.5;" width="427" x="2063.71" y="495.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="58" x="2248.21" y="511.6387">Publisher</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2064.71" x2="2489.71" y1="519.4688" y2="519.4688"/><ellipse cx="2074.71" cy="531.3711" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="401" x="2083.71" y="533.6792">publish(string message, optional&lt;EmailHeaders&gt; additional_headers)</text><!--class Subscription--><rect fill="#FEFECE" filter="url(#f1593iq5fuy4r5)" height="91.1875" id="Subscription" style="stroke: #A80036; stroke-width: 1.5;" width="391" x="2783.71" y="655.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="78" x="2940.21" y="671.6387">Subscription</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2784.71" x2="3173.71" y1="679.4688" y2="679.4688"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="2791.71" y="688.3711"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="274" x="2803.71" y="693.6792">messages: queue&lt;pair&lt;string, MessageInfo&gt;&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2784.71" x2="3173.71" y1="700.2734" y2="700.2734"/><ellipse cx="2794.71" cy="712.1758" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="120" x="2803.71" y="714.4839">has_message(): bool</text><ellipse cx="2794.71" cy="724.9805" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="189" x="2803.71" y="727.2886">get_message(): optional&lt;string&gt;</text><ellipse cx="2794.71" cy="737.7852" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="365" x="2803.71" y="740.0933">get_message_with_info(): optional&lt;pair&lt;string, MessageInfo&gt;&gt;</text><!--class ServiceClient--><rect fill="#FEFECE" filter="url(#f1593iq5fuy4r5)" height="142.4063" id="ServiceClient" style="stroke: #A80036; stroke-width: 1.5;" width="509" x="1510.71" y="630"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="80" x="1725.21" y="646.1387">ServiceClient</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1511.71" x2="2018.71" y1="653.9688" y2="653.9688"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1518.71" y="662.8711"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="389" x="1530.71" y="668.1792">responses: map&lt;SequenceNumber, pair&lt;EmailData, ServiceInfo&gt;&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1511.71" x2="2018.71" y1="674.7734" y2="674.7734"/><ellipse cx="1521.71" cy="686.6758" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="301" x="1530.71" y="688.9839">send_request(string request, SequenceNumber seq)</text><ellipse cx="1521.71" cy="699.4805" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="239" x="1530.71" y="701.7886">send_request(request): SequenceNumber</text><ellipse cx="1521.71" cy="712.2852" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="247" x="1530.71" y="714.5933">has_response(SequenceNumber seq): bool</text><ellipse cx="1521.71" cy="725.0898" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="121" x="1530.71" y="727.3979">has_response(): bool</text><ellipse cx="1521.71" cy="737.8945" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="316" x="1530.71" y="740.2026">get_response(SequenceNumber seq): optional&lt;string&gt;</text><ellipse cx="1521.71" cy="750.6992" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="483" x="1530.71" y="753.0073">get_response_with_info(SequenceNumber seq): optional&lt;pair&lt;string, ServiceInfo&gt;&gt;</text><ellipse cx="1521.71" cy="763.5039" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="357" x="1530.71" y="765.812">get_response_with_info(): optional&lt;pair&lt;string, ServiceInfo&gt;&gt;</text><!--class ServiceServer--><rect fill="#FEFECE" filter="url(#f1593iq5fuy4r5)" height="103.9922" id="ServiceServer" style="stroke: #A80036; stroke-width: 1.5;" width="428" x="1048.21" y="649"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="85" x="1219.71" y="665.1387">ServiceServer</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1049.21" x2="1475.21" y1="672.9688" y2="672.9688"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1056.21" y="681.8711"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="280" x="1068.21" y="687.1792">requests: queue&lt;pair&lt;EmailData, ServiceInfo&gt;&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1049.21" x2="1475.21" y1="693.7734" y2="693.7734"/><ellipse cx="1059.21" cy="705.6758" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="111" x="1068.21" y="707.9839">has_request(): bool</text><ellipse cx="1059.21" cy="718.4805" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="235" x="1068.21" y="720.7886">get_request(): optional&lt;ServiceRequest&gt;</text><ellipse cx="1059.21" cy="731.2852" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="402" x="1068.21" y="733.5933">get_request_with_info(): optional&lt;pair&lt;ServiceRequest, ServiceInfo&gt;&gt;</text><ellipse cx="1059.21" cy="744.0898" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="357" x="1068.21" y="746.3979">send_response(ServiceRequestId request_id, string response)</text><!--link CurlContext to CurlExecutor--><path d="M153.21,104.58 C153.21,123.77 153.21,144.6 153.21,160.76 " fill="none" id="CurlContext-CurlExecutor" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="153.21,91.31,149.21,97.31,153.21,103.31,157.21,97.31,153.21,91.31" style="stroke: #A80036; stroke-width: 1.0;"/><!--link EmailSender to CurlEmailSender--><path d="M705.15,382.28 C606.39,411.52 464.21,453.63 365.18,482.95 " fill="none" id="EmailSender-CurlEmailSender" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="703.45,375.48,724.61,376.51,707.42,388.9,703.45,375.48" style="stroke: #A80036; stroke-width: 1.0;"/><!--link CurlExecutor to CurlEmailSender--><path d="M86.82,224.83 C62.83,240.78 38.42,262.24 25.21,289 C2.18,335.63 -2.25,361.84 25.21,406 C47.4,441.7 84.83,466.25 122.86,483 " fill="none" id="CurlExecutor-CurlEmailSender" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="83.35,218.75,104.04,214.2,90.7,230.66,83.35,218.75" style="stroke: #A80036; stroke-width: 1.0;"/><!--link EmailReceiver to CurlEmailReceiver--><path d="M1026.22,221.46 C904.58,239.87 747.94,264.46 609.21,289 C590.51,292.31 571.16,295.85 551.74,299.49 " fill="none" id="EmailReceiver-CurlEmailReceiver" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1025.38,214.5,1046.2,218.44,1027.47,228.35,1025.38,214.5" style="stroke: #A80036; stroke-width: 1.0;"/><!--link CurlExecutor to CurlEmailReceiver--><path d="M197.71,233.2 C219.27,253.64 245.24,278.26 267.45,299.33 " fill="none" id="CurlExecutor-CurlEmailReceiver" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="192.6,238,182.91,219.16,202.24,227.84,192.6,238" style="stroke: #A80036; stroke-width: 1.0;"/><!--link EmailReceiver to IntraEmailReceiver--><path d="M1233.21,245.25 C1233.21,266.07 1233.21,289.37 1233.21,308.36 " fill="none" id="EmailReceiver-IntraEmailReceiver" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1226.21,245.13,1233.21,225.13,1240.21,245.13,1226.21,245.13" style="stroke: #A80036; stroke-width: 1.0;"/><!--link EmailSender to IntraEmailSender--><path d="M861.36,391.29 C891.57,421.95 931.38,462.36 957.61,488.99 " fill="none" id="EmailSender-IntraEmailSender" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="856.04,395.86,846.99,376.7,866.01,386.04,856.04,395.86" style="stroke: #A80036; stroke-width: 1.0;"/><!--link IntraEmailReceiver to IntraEmailSender--><path d="M1166.22,394.01 C1121.73,424.24 1064.72,462.98 1026.68,488.82 " fill="none" id="IntraEmailReceiver-IntraEmailSender" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="1177.24,386.52,1170.0292,386.5903,1167.3208,393.2735,1174.5316,393.2031,1177.24,386.52" style="stroke: #A80036; stroke-width: 1.0;"/><!--link EmailReceiver to PollingManager--><path d="M1357.61,228.93 C1429.87,250.96 1521.28,278.84 1596.97,301.91 " fill="none" id="EmailReceiver-PollingManager" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="1344.81,225.03,1349.3783,230.6095,1356.2856,228.5386,1351.7173,222.9591,1344.81,225.03" style="stroke: #A80036; stroke-width: 1.0;"/><!--link EmailHandler to SubscriptionHandler--><path d="M2102.88,379.73 C2121.15,389.41 2142.1,399.29 2162.21,406 C2167.41,407.74 2400.48,447.49 2585.6,478.93 " fill="none" id="EmailHandler-SubscriptionHandler" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="2099.44,385.83,2085.31,370.04,2106.2,373.56,2099.44,385.83" style="stroke: #A80036; stroke-width: 1.0;"/><!--link PollingManager to SubscriptionHandler--><path d="M1894.22,390.17 C1918.82,396.07 1944.13,401.61 1968.21,406 C2205.76,449.33 2269.06,432.55 2508.21,466 C2535.99,469.89 2565.14,474.34 2593.92,478.95 " fill="none" id="PollingManager-SubscriptionHandler" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1889.31,388.98,1897.1253,394.9734,1894.1714,390.149,1898.9958,387.1951,1889.31,388.98" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="1892.6072" y="388.9894">registers with</text><!--link EmailHandler to ServiceHandler--><path d="M1990.98,379.4 C1944.63,403.58 1879.19,437.71 1825.09,465.94 " fill="none" id="EmailHandler-ServiceHandler" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1988,373.06,2008.97,370.01,1994.48,385.47,1988,373.06" style="stroke: #A80036; stroke-width: 1.0;"/><!--link PollingManager to ServiceHandler--><path d="M1737.27,411.08 C1735.55,429.15 1733.7,448.66 1732.05,465.95 " fill="none" id="PollingManager-ServiceHandler" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1737.75,406.02,1732.9182,414.6022,1737.278,410.9977,1740.8825,415.3574,1737.75,406.02" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="1647.2046" y="425.7399">registers with</text><!--link GidObject to PubSubObject--><path d="M2114.99,235.37 C2150.42,262.12 2194.47,295.36 2225.1,318.49 " fill="none" id="GidObject-PubSubObject" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="2110.64,240.86,2098.89,223.22,2119.07,229.68,2110.64,240.86" style="stroke: #A80036; stroke-width: 1.0;"/><!--link NamedObject to PubSubObject--><path d="M1875.66,215.05 C1948.58,232.77 2047.36,258.95 2132.21,289 C2156.05,297.45 2181.64,308.35 2203.76,318.38 " fill="none" id="NamedObject-PubSubObject" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1873.62,221.76,1855.81,210.28,1876.89,208.15,1873.62,221.76" style="stroke: #A80036; stroke-width: 1.0;"/><!--link GidObject to ServiceObject--><path d="M1984.9,205.87 C1951.06,212.91 1910.05,221.41 1873.21,229 C1742.59,255.89 1689.2,213.59 1579.21,289 C1528.27,323.93 1549.38,363.87 1504.21,406 C1481.37,427.3 1411.38,463.68 1359.94,488.96 " fill="none" id="GidObject-ServiceObject" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1983.94,198.92,2004.94,201.69,1986.79,212.62,1983.94,198.92" style="stroke: #A80036; stroke-width: 1.0;"/><!--link NamedObject to ServiceObject--><path d="M1665.19,216.51 C1616.93,231.89 1561.04,255.2 1518.21,289 C1468.56,328.18 1480.13,359.55 1437.21,406 C1408.15,437.45 1370.02,467.81 1341.53,488.81 " fill="none" id="NamedObject-ServiceObject" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1663.47,209.72,1684.64,210.6,1667.54,223.11,1663.47,209.72" style="stroke: #A80036; stroke-width: 1.0;"/><!--link PubSubObject to Publisher--><path d="M2266.53,397.02 C2269.42,429.51 2273.09,470.72 2275.28,495.41 " fill="none" id="PubSubObject-Publisher" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="2259.52,397.25,2264.72,376.7,2273.46,396,2259.52,397.25" style="stroke: #A80036; stroke-width: 1.0;"/><!--link EmailSender to Publisher--><path d="M917.75,380.18 C952.33,390.07 991.67,399.97 1028.21,406 C1475.38,479.85 1597.29,403.62 2046.21,466 C2095.94,472.91 2150.85,484.85 2194.65,495.44 " fill="none" id="EmailSender-Publisher" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="905.24,376.54,909.8853,382.0555,916.7632,379.8889,912.1179,374.3733,905.24,376.54" style="stroke: #A80036; stroke-width: 1.0;"/><!--link PubSubObject to Subscription--><path d="M2364.33,355.19 C2579.48,370.33 3063.65,410.27 3112.21,466 C3142.57,500.85 3130.14,527.4 3112.21,570 C3097.99,603.78 3070.24,633.16 3043.74,655.4 " fill="none" id="PubSubObject-Subscription" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="2363.84,362.17,2344.37,353.8,2364.81,348.21,2363.84,362.17" style="stroke: #A80036; stroke-width: 1.0;"/><!--link SubscriptionHandler to Subscription--><path d="M2849.55,561.13 C2875.92,589.38 2910.6,626.52 2937.46,655.29 " fill="none" id="SubscriptionHandler-Subscription" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2846.05,557.39,2849.2485,566.705,2849.4544,561.0519,2855.1076,561.2579,2846.05,557.39" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="2759.9053" y="577.4946">registers with</text><!--link ServiceObject to ServiceClient--><path d="M1375.81,555.67 C1386.6,560.65 1397.64,565.57 1408.21,570 C1457.63,590.72 1511.64,611.39 1562.35,629.94 " fill="none" id="ServiceObject-ServiceClient" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1372.52,561.86,1357.39,547.02,1378.47,549.19,1372.52,561.86" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Publisher to ServiceClient--><path d="M2203.69,544.99 C2140.95,567.17 2047.75,600.12 1963.39,629.94 " fill="none" id="Publisher-ServiceClient" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2216.21,540.56,2209.2205,538.7862,2204.8948,544.5559,2211.8844,546.3297,2216.21,540.56" style="stroke: #A80036; stroke-width: 1.0;"/><!--link ServiceHandler to ServiceClient--><path d="M1739.1,575.65 C1742.71,592.85 1746.72,611.94 1750.49,629.9 " fill="none" id="ServiceHandler-ServiceClient" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1737.99,570.38,1735.9299,580.011,1739.0201,575.2727,1743.7583,578.3629,1737.99,570.38" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="1648.9259" y="590.128">registers with</text><!--link ServiceObject to ServiceServer--><path d="M1290.88,566.93 C1285.43,592.22 1278.75,623.25 1273.2,648.98 " fill="none" id="ServiceObject-ServiceServer" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1284.06,565.36,1295.11,547.28,1297.74,568.31,1284.06,565.36" style="stroke: #A80036; stroke-width: 1.0;"/><!--link EmailSender to ServiceServer--><path d="M794.37,387.95 C767.72,435.86 734.37,516.83 775.21,570 C809.69,614.89 933.7,647.61 1047.94,669 " fill="none" id="EmailSender-ServiceServer" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="800.95,376.52,794.4906,379.7256,794.9651,386.921,801.4246,383.7155,800.95,376.52" style="stroke: #A80036; stroke-width: 1.0;"/><!--link ServiceHandler to ServiceServer--><path d="M1591.28,571.91 C1528.9,596.19 1455.23,624.86 1393.44,648.92 " fill="none" id="ServiceHandler-ServiceServer" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1596.13,570.02,1586.2924,569.5496,1591.4692,571.8302,1589.1886,577.007,1596.13,570.02" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="1487.8052" y="590.0943">registers with</text><!--
@startuml

hide empty attributes
hide empty methods
hide circle


class CurlContext {
   +init()
   +fini()
   +get_handle(): CURL *
   +execute()
}

class CurlExecutor {
   +init()
   #init_options() {abstract}
}
CurlContext *- - CurlExecutor


class EmailSender {
   +send(EmailContent, optional<EmailHeaders>): bool {abstract}
   +reply(EmailContent, EmailData, optional<EmailHeaders>): bool {abstract}
}

class CurlEmailSender {
   +send(EmailContent, optional<EmailHeaders>): bool {abstract}
   +reply(EmailContent, EmailData, optional<EmailHeaders>): bool {abstract}
   #init_options() {abstract}
}
EmailSender <|- - CurlEmailSender
CurlExecutor <|- - CurlEmailSender


class EmailReceiver {
   +get_email(nanoseconds polling_period): optional<EmailData> {abstract}
   +shutdown()
   #init_options() {abstract}
}
class CurlEmailReceiver {
   +get_email(nanoseconds polling_period): optional<EmailData> {abstract
   #init_options() {abstract}
   -get_nextuid(): optional<int>
   -get_email_from_uid(int): optional<EmailData>
   -execute(optional<string>, url_options, optional<string> custom_request): optional<string>
}
EmailReceiver <|- - CurlEmailReceiver
CurlExecutor <|- - CurlEmailReceiver


class IntraEmailReceiver {
   -emails: queue<EmailData>
   +get_email(nanoseconds polling_period): optional<EmailData> {abstract}
   +receive(EmailData data)
}
EmailReceiver <|- - IntraEmailReceiver

class IntraEmailSender {
   +send(EmailContent, optional<EmailHeaders>): bool {abstract}
   +reply(EmailContent, EmailData, optional<EmailHeaders>): bool {abstract}
}
EmailSender <|- - IntraEmailSender
IntraEmailReceiver o- - IntraEmailSender


class PollingManager {
   -thread
   -handlers: vector<function<void (EmailData)>>
   -poll_thread()
   +start()
   +shutdown()
   +register_handler(function<void (EmailData)>)
}
EmailReceiver o- - PollingManager

abstract class EmailHandler {
   +handle(EmailData) {abstract}
}


class SubscriptionHandler {
   -subscriptions: map<string, queue<pair<string, MessageInfo>>>
   +register_subscription(string topic_name, queue<pair<string, MessageInfo>> message_queue)
   +handle(EmailData) {abstract}
}
EmailHandler <|- - SubscriptionHandler
PollingManager "registers with" <- - SubscriptionHandler

class ServiceHandler {
   -clients: map<GidValue, shared_ptr<map<SequenceNumber, pair<EmailData, ServiceInfo>>>>
   -servers: map<string, shared_ptr<queue<pair<EmailData, ServiceInfo>>>>
   +register_service_client(Gid, map<SequenceNumber, pair<EmailData, ServiceInfo>> response_map)
   +register_service_server(string service_name, queue<pair<EmailData, ServiceInfo>> request_queue)
   +handle(EmailData) {abstract}
}
EmailHandler <|- - ServiceHandler
PollingManager "registers with" <- - ServiceHandler


class GidObject {
   -gid: Gid
   +get_gid(): Gid
}
class NamedObject {
   -object_name: string
   #get_object_name(): string
   #validate_name() {abstract}
}

class PubSubObject {
   +get_topic_name(): string
   -validate_name() {abstract}
}
GidObject <|- - PubSubObject
NamedObject <|- - PubSubObject

class ServiceObject {
   +get_service_name(): string
   -validate_name() {abstract}
}
GidObject <|- - ServiceObject
NamedObject <|- - ServiceObject


class Publisher {
   +publish(string message, optional<EmailHeaders> additional_headers)
}
PubSubObject <|- - Publisher
EmailSender o- - Publisher

class Subscription {
   -messages: queue<pair<string, MessageInfo>>
   +has_message(): bool
   +get_message(): optional<string>
   +get_message_with_info(): optional<pair<string, MessageInfo>>
}
PubSubObject <|- - Subscription
SubscriptionHandler "registers with" <- - Subscription


class ServiceClient {
   -responses: map<SequenceNumber, pair<EmailData, ServiceInfo>>
   +send_request(string request, SequenceNumber seq)
   +send_request(request): SequenceNumber
   +has_response(SequenceNumber seq): bool
   +has_response(): bool
   +get_response(SequenceNumber seq): optional<string>
   +get_response_with_info(SequenceNumber seq): optional<pair<string, ServiceInfo>>
   +get_response_with_info(): optional<pair<string, ServiceInfo>>
}
ServiceObject <|- - ServiceClient
Publisher *- - ServiceClient
ServiceHandler "registers with" <- - ServiceClient

class ServiceServer {
   -requests: queue<pair<EmailData, ServiceInfo>>
   +has_request(): bool
   +get_request(): optional<ServiceRequest>
   +get_request_with_info(): optional<pair<ServiceRequest, ServiceInfo>>
   +send_response(ServiceRequestId request_id, string response)
}
ServiceObject <|- - ServiceServer
EmailSender o- - ServiceServer
ServiceHandler "registers with" <- - ServiceServer

@enduml

PlantUML version 1.2018.13(Mon Nov 26 17:11:51 UTC 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.11+9
Operating System: Linux
OS Version: 5.8.0-1039-azure
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>