<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="489px" preserveAspectRatio="none" style="width:1233px;height:489px;" version="1.1" viewBox="0 0 1233 489" width="1233px" zoomAndPan="magnify"><defs><filter height="300%" id="f1k9yinzlokctj" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--cluster wait--><polygon fill="#FFFFFF" filter="url(#f1k9yinzlokctj)" points="418,251,457,251,464,273.2969,1211,273.2969,1211,477,418,477,418,251" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="418" x2="464" y1="273.2969" y2="273.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="33" x="422" y="265.9951">wait</text><!--class wait.--><rect fill="#FEFECE" filter="url(#f1k9yinzlokctj)" height="159.2109" id="wait." style="stroke: #A80036; stroke-width: 1.5;" width="725" x="461.5" y="294"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="826" y="310.1387"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="462.5" x2="1185.5" y1="317.9688" y2="317.9688"/><ellipse cx="472.5" cy="346.6758" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="434" x="481.5" y="348.9839">wait_for_message(Subscription * subscription, milliseconds timeout): string</text><ellipse cx="472.5" cy="359.4805" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="610" x="481.5" y="361.7886">wait_for_message_with_info(Subscription * subscription, milliseconds timeout): pair&lt;string, MessageInfo&gt;</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="462.5" x2="788.5" y1="332.3711" y2="332.3711"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="71" x="788.5" y="335.6792">Subscription</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="859.5" x2="1185.5" y1="332.3711" y2="332.3711"/><ellipse cx="472.5" cy="389.0898" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="532" x="481.5" y="391.3979">wait_for_response(SequenceNumber seq, ServiceClient * client, milliseconds timeout): string</text><ellipse cx="472.5" cy="401.8945" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="699" x="481.5" y="404.2026">wait_for_response_with_info(SequenceNumber seq, ServiceClient * client, milliseconds timeout): pair&lt;string, ServiceInfo&gt;</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="462.5" x2="786" y1="374.7852" y2="374.7852"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="76" x="786" y="378.0933">Service client</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="862" x2="1185.5" y1="374.7852" y2="374.7852"/><ellipse cx="472.5" cy="431.5039" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="456" x="481.5" y="433.812">wait_for_request(ServiceServer * server, milliseconds timeout): ServiceRequest</text><ellipse cx="472.5" cy="444.3086" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="623" x="481.5" y="446.6167">wait_for_request_with_info(ServiceServer * server, milliseconds timeout): pair&lt;ServiceRequest, ServiceInfo&gt;</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="462.5" x2="782.5" y1="417.1992" y2="417.1992"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="83" x="782.5" y="420.5073">Service server</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="865.5" x2="1185.5" y1="417.1992" y2="417.1992"/><!--class GuardCondition--><rect fill="#FEFECE" filter="url(#f1k9yinzlokctj)" height="83.1875" id="GuardCondition" style="stroke: #A80036; stroke-width: 1.5;" width="228" x="6" y="76"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="97" x="71.5" y="92.1387">GuardCondition</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="233" y1="99.9688" y2="99.9688"/><ellipse cx="17" cy="111.8711" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="46" x="26" y="114.1792">trigger()</text><ellipse cx="17" cy="124.6758" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="92" x="26" y="126.9839">triggered(): bool</text><ellipse cx="17" cy="137.4805" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="202" x="26" y="139.7886">exchange_in_use(bool in_use): bool</text><ellipse cx="17" cy="150.2852" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="38" x="26" y="152.5933">reset()</text><!--class WaitSet--><rect fill="#FEFECE" filter="url(#f1k9yinzlokctj)" height="219.2344" id="WaitSet" style="stroke: #A80036; stroke-width: 1.5;" width="314" x="269" y="8"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="48" x="402" y="24.1387">WaitSet</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="270" x2="582" y1="31.9688" y2="31.9688"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="277" y="40.8711"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="219" x="289" y="46.1792">subscriptions: vector&lt;Subscription *&gt;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="277" y="53.6758"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="182" x="289" y="58.9839">clients: vector&lt;ServiceClient *&gt;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="277" y="66.4805"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="195" x="289" y="71.7886">servers: vector&lt;ServiceServer *&gt;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="277" y="79.2852"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="239" x="289" y="84.5933">guard_conditions: vector&lt;Subscription *&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="270" x2="582" y1="91.1875" y2="91.1875"/><ellipse cx="280" cy="103.0898" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="186" x="289" y="105.3979">add_subscription(Subscription *)</text><ellipse cx="280" cy="115.8945" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="149" x="289" y="118.2026">add_client(ServiceClient *)</text><ellipse cx="280" cy="128.6992" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="162" x="289" y="131.0073">add_server(ServiceServer *)</text><ellipse cx="280" cy="141.5039" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="223" x="289" y="143.812">add_guard_condition(GuardCondition *)</text><ellipse cx="280" cy="154.3086" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="251" x="289" y="156.6167">get_subscriptions(): vector&lt;Subscription *&gt;</text><ellipse cx="280" cy="167.1133" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="214" x="289" y="169.4214">get_clients(): vector&lt;ServiceClient *&gt;</text><ellipse cx="280" cy="179.918" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="227" x="289" y="182.2261">get_servers(): vector&lt;ServiceServer *&gt;</text><ellipse cx="280" cy="192.7227" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="288" x="289" y="195.0308">get_guard_conditions(): vector&lt;GuardCondition *&gt;</text><ellipse cx="280" cy="205.5273" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="181" x="289" y="207.8354">wait(milliseconds timeout): bool</text><ellipse cx="280" cy="218.332" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="36" x="289" y="220.6401">clear()</text><!--link WaitSet to wait--><path d="M426,232.51 C426,236.6625 426,240.8337 426,245.0056 C426,246.0486 426,247.0916 426,248.1344 C426,248.6558 426,249.1771 426,249.6984 C426,249.959 426,250.2196 426,250.4802 " fill="none" id="WaitSet-wait" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="426,227.32,422,236.32,426,232.32,430,236.32,426,227.32" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml

class GuardCondition {
   +trigger()
   +triggered(): bool
   +exchange_in_use(bool in_use): bool
   +reset()
}
hide GuardCondition fields
hide GuardCondition circle

class WaitSet {
   -subscriptions: vector<Subscription *>
   -clients: vector<ServiceClient *>
   -servers: vector<ServiceServer *>
   -guard_conditions: vector<Subscription *>
   +add_subscription(Subscription *)
   +add_client(ServiceClient *)
   +add_server(ServiceServer *)
   +add_guard_condition(GuardCondition *)
   +get_subscriptions(): vector<Subscription *>
   +get_clients(): vector<ServiceClient *>
   +get_servers(): vector<ServiceServer *>
   +get_guard_conditions(): vector<GuardCondition *>
   +wait(milliseconds timeout): bool
   +clear()
}
hide WaitSet circle

class wait. {
   .. Subscription ..
   +wait_for_message(Subscription * subscription, milliseconds timeout): string
   +wait_for_message_with_info(Subscription * subscription, milliseconds timeout): pair<string, MessageInfo>
   .. Service client ..
   +wait_for_response(SequenceNumber seq, ServiceClient * client, milliseconds timeout): string
   +wait_for_response_with_info(SequenceNumber seq, ServiceClient * client, milliseconds timeout): pair<string, ServiceInfo>
   .. Service server ..
   +wait_for_request(ServiceServer * server, milliseconds timeout): ServiceRequest
   +wait_for_request_with_info(ServiceServer * server, milliseconds timeout): pair<ServiceRequest, ServiceInfo>
}
hide wait. circle
hide wait. fields
WaitSet <- - wait

@enduml

PlantUML version 1.2018.13(Mon Nov 26 17:11:51 UTC 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.11+9
Operating System: Linux
OS Version: 5.8.0-1039-azure
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>