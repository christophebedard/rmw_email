<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>email: email::ServiceHandler Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">email
   &#160;<span id="projectnumber">master</span>
   </div>
   <div id="projectbrief">Email-based middleware</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceemail.html">email</a></li><li class="navelem"><a class="el" href="classemail_1_1ServiceHandler.html">ServiceHandler</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="classemail_1_1ServiceHandler-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">email::ServiceHandler Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Email handler for service servers.  
 <a href="classemail_1_1ServiceHandler.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="service__handler_8hpp_source.html">service_handler.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for email::ServiceHandler:</div>
<div class="dyncontent">
<div class="center"><img src="classemail_1_1ServiceHandler__inherit__graph.png" border="0" usemap="#email_1_1ServiceHandler_inherit__map" alt="Inheritance graph"/></div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for email::ServiceHandler:</div>
<div class="dyncontent">
<div class="center"><img src="classemail_1_1ServiceHandler__coll__graph.png" border="0" usemap="#email_1_1ServiceHandler_coll__map" alt="Collaboration graph"/></div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a59fbee3b3806c6c0e58e770deb54c68e"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classemail_1_1ServiceHandler.html#a59fbee3b3806c6c0e58e770deb54c68e">ServiceResponseMap</a> = <a class="el" href="classemail_1_1SafeMap.html">SafeMap</a>&lt; <a class="el" href="namespaceemail.html#a0de800b4ba159d6e3892ce756a690103">SequenceNumber</a>, <a class="elRef" href="http://en.cppreference.com/w/cpp/utility/pair.html">std::pair</a>&lt; struct <a class="el" href="structemail_1_1EmailData.html">EmailData</a>, <a class="el" href="classemail_1_1ServiceInfo.html">ServiceInfo</a> &gt; &gt;</td></tr>
<tr class="separator:a59fbee3b3806c6c0e58e770deb54c68e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade298da509aef85142d98c336c1e7058"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classemail_1_1ServiceHandler.html#ade298da509aef85142d98c336c1e7058">RequestQueue</a> = <a class="el" href="classemail_1_1SafeQueue.html">SafeQueue</a>&lt; <a class="elRef" href="http://en.cppreference.com/w/cpp/utility/pair.html">std::pair</a>&lt; struct <a class="el" href="structemail_1_1EmailData.html">EmailData</a>, <a class="el" href="classemail_1_1ServiceInfo.html">ServiceInfo</a> &gt; &gt;</td></tr>
<tr class="separator:ade298da509aef85142d98c336c1e7058"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac8b733ebb32ee7203ad714aedd911601"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classemail_1_1ServiceHandler.html#ac8b733ebb32ee7203ad714aedd911601">ServiceHandler</a> ()</td></tr>
<tr class="memdesc:ac8b733ebb32ee7203ad714aedd911601"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="classemail_1_1ServiceHandler.html#ac8b733ebb32ee7203ad714aedd911601">More...</a><br /></td></tr>
<tr class="separator:ac8b733ebb32ee7203ad714aedd911601"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71953e56a4f95c3154e6d815bd67e624"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classemail_1_1ServiceHandler.html#a71953e56a4f95c3154e6d815bd67e624">~ServiceHandler</a> ()</td></tr>
<tr class="separator:a71953e56a4f95c3154e6d815bd67e624"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d9b0e52c4a35897cba9e8a179f60efd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classemail_1_1ServiceHandler.html#a4d9b0e52c4a35897cba9e8a179f60efd">register_service_client</a> (const <a class="el" href="classemail_1_1Gid.html">Gid</a> &amp;gid, ServiceResponseMap::SharedPtr response_map)</td></tr>
<tr class="memdesc:a4d9b0e52c4a35897cba9e8a179f60efd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a service client with the handler.  <a href="classemail_1_1ServiceHandler.html#a4d9b0e52c4a35897cba9e8a179f60efd">More...</a><br /></td></tr>
<tr class="separator:a4d9b0e52c4a35897cba9e8a179f60efd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ca046b67012a04fd08c2871f19986a4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classemail_1_1ServiceHandler.html#a6ca046b67012a04fd08c2871f19986a4">register_service_server</a> (const <a class="elRef" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> &amp;service_name, RequestQueue::SharedPtr request_queue)</td></tr>
<tr class="memdesc:a6ca046b67012a04fd08c2871f19986a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a service server with the handler.  <a href="classemail_1_1ServiceHandler.html#a6ca046b67012a04fd08c2871f19986a4">More...</a><br /></td></tr>
<tr class="separator:a6ca046b67012a04fd08c2871f19986a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19fc6c955eeecce3e61e7b4efd9fa174"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classemail_1_1ServiceHandler.html#a19fc6c955eeecce3e61e7b4efd9fa174">handle</a> (const struct <a class="el" href="structemail_1_1EmailData.html">EmailData</a> &amp;data)</td></tr>
<tr class="memdesc:a19fc6c955eeecce3e61e7b4efd9fa174"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle new email.  <a href="classemail_1_1ServiceHandler.html#a19fc6c955eeecce3e61e7b4efd9fa174">More...</a><br /></td></tr>
<tr class="separator:a19fc6c955eeecce3e61e7b4efd9fa174"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:af8bc3076e7f671a33407a8cfd461ff0e"><td class="memItemLeft" align="right" valign="top">static constexpr auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classemail_1_1ServiceHandler.html#af8bc3076e7f671a33407a8cfd461ff0e">HEADER_SEQUENCE_NUMBER</a> = &quot;Request-Sequence-Number&quot;</td></tr>
<tr class="memdesc:af8bc3076e7f671a33407a8cfd461ff0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Custom header name for service request sequence number.  <a href="classemail_1_1ServiceHandler.html#af8bc3076e7f671a33407a8cfd461ff0e">More...</a><br /></td></tr>
<tr class="separator:af8bc3076e7f671a33407a8cfd461ff0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_methods_classemail_1_1EmailHandler"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classemail_1_1EmailHandler')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classemail_1_1EmailHandler.html">email::EmailHandler</a></td></tr>
<tr class="memitem:ae11713a20d4aa3bf7a9913e8853f3c24 inherit pro_methods_classemail_1_1EmailHandler"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classemail_1_1EmailHandler.html#ae11713a20d4aa3bf7a9913e8853f3c24">EmailHandler</a> ()</td></tr>
<tr class="memdesc:ae11713a20d4aa3bf7a9913e8853f3c24 inherit pro_methods_classemail_1_1EmailHandler"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="classemail_1_1EmailHandler.html#ae11713a20d4aa3bf7a9913e8853f3c24">More...</a><br /></td></tr>
<tr class="separator:ae11713a20d4aa3bf7a9913e8853f3c24 inherit pro_methods_classemail_1_1EmailHandler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2fa34d6911cb7e54a99be33e449373f inherit pro_methods_classemail_1_1EmailHandler"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classemail_1_1EmailHandler.html#ad2fa34d6911cb7e54a99be33e449373f">~EmailHandler</a> ()</td></tr>
<tr class="separator:ad2fa34d6911cb7e54a99be33e449373f inherit pro_methods_classemail_1_1EmailHandler"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Email handler for service servers. </p>
<p>Distributes them to the right service server.</p>
<p>There can be more than one service server for the same service name. All service servers may get the request and respond, but only the first response will be used by the original service client; the rest will be discarded. </p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a59fbee3b3806c6c0e58e770deb54c68e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59fbee3b3806c6c0e58e770deb54c68e">&#9670;&nbsp;</a></span>ServiceResponseMap</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classemail_1_1ServiceHandler.html#a59fbee3b3806c6c0e58e770deb54c68e">email::ServiceHandler::ServiceResponseMap</a> =  <a class="el" href="classemail_1_1SafeMap.html">SafeMap</a>&lt;<a class="el" href="namespaceemail.html#a0de800b4ba159d6e3892ce756a690103">SequenceNumber</a>, <a class="elRef" href="http://en.cppreference.com/w/cpp/utility/pair.html">std::pair</a>&lt;struct <a class="el" href="structemail_1_1EmailData.html">EmailData</a>, <a class="el" href="classemail_1_1ServiceInfo.html">ServiceInfo</a>&gt; &gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ade298da509aef85142d98c336c1e7058"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade298da509aef85142d98c336c1e7058">&#9670;&nbsp;</a></span>RequestQueue</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classemail_1_1ServiceHandler.html#ade298da509aef85142d98c336c1e7058">email::ServiceHandler::RequestQueue</a> =  <a class="el" href="classemail_1_1SafeQueue.html">SafeQueue</a>&lt;<a class="elRef" href="http://en.cppreference.com/w/cpp/utility/pair.html">std::pair</a>&lt;struct <a class="el" href="structemail_1_1EmailData.html">EmailData</a>, <a class="el" href="classemail_1_1ServiceInfo.html">ServiceInfo</a>&gt; &gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ac8b733ebb32ee7203ad714aedd911601"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8b733ebb32ee7203ad714aedd911601">&#9670;&nbsp;</a></span>ServiceHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">email::ServiceHandler::ServiceHandler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>

</div>
</div>
<a id="a71953e56a4f95c3154e6d815bd67e624"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71953e56a4f95c3154e6d815bd67e624">&#9670;&nbsp;</a></span>~ServiceHandler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual email::ServiceHandler::~ServiceHandler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a4d9b0e52c4a35897cba9e8a179f60efd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d9b0e52c4a35897cba9e8a179f60efd">&#9670;&nbsp;</a></span>register_service_client()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void email::ServiceHandler::register_service_client </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classemail_1_1Gid.html">Gid</a> &amp;&#160;</td>
          <td class="paramname"><em>gid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ServiceResponseMap::SharedPtr&#160;</td>
          <td class="paramname"><em>response_map</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a service client with the handler. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gid</td><td>the service client GID </td></tr>
    <tr><td class="paramname">response_map</td><td>the service client's response map to add the new response to </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6ca046b67012a04fd08c2871f19986a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ca046b67012a04fd08c2871f19986a4">&#9670;&nbsp;</a></span>register_service_server()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void email::ServiceHandler::register_service_server </td>
          <td>(</td>
          <td class="paramtype">const <a class="elRef" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> &amp;&#160;</td>
          <td class="paramname"><em>service_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RequestQueue::SharedPtr&#160;</td>
          <td class="paramname"><em>request_queue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a service server with the handler. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">service_name</td><td>the service name </td></tr>
    <tr><td class="paramname">request_queue</td><td>the service server's request queue to push the new request to </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a19fc6c955eeecce3e61e7b4efd9fa174"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19fc6c955eeecce3e61e7b4efd9fa174">&#9670;&nbsp;</a></span>handle()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void email::ServiceHandler::handle </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structemail_1_1EmailData.html">EmailData</a> &amp;&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle new email. </p>
<p>To be called by the <code><a class="el" href="classemail_1_1PollingManager.html" title="Manager for polling for new emails.">PollingManager</a></code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>the new email data </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classemail_1_1EmailHandler.html#a4f58d53157b09b2b8e70a77538f2b37f">email::EmailHandler</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="af8bc3076e7f671a33407a8cfd461ff0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8bc3076e7f671a33407a8cfd461ff0e">&#9670;&nbsp;</a></span>HEADER_SEQUENCE_NUMBER</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr auto email::ServiceHandler::HEADER_SEQUENCE_NUMBER = &quot;Request-Sequence-Number&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Custom header name for service request sequence number. </p>
<p>Note that there is no "X-" prefix. See RFC 6648: <a href="https://tools.ietf.org/html/rfc6648">https://tools.ietf.org/html/rfc6648</a> </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/email/<a class="el" href="service__handler_8hpp_source.html">service_handler.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
